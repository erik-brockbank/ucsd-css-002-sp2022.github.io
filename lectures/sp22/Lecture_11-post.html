
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lecture 11 (4/20/2022) &#8212; UCSD CSS 2 - Spring 2022</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.5f77b4aec8189eecf79907ce328c390d.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Lecture 12 (4/22/2022)" href="Lecture_12-post.html" />
    <link rel="prev" title="Lecture 10 (4/18/22)" href="Lecture_10-post.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      <img src="../../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">UCSD CSS 2 - Spring 2022</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../index.html">
   Welcome to CSS 2
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Course (CSS 2 Spring 2022)
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../course/syllabus.html">
   Syllabus
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../course/expectations.html">
   Expectations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../course/datahub.html">
   Datahub assignments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../course/debugging.html">
   Debugging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../course/resources.html">
   Extracurricular Resources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../course/final.html">
   Final Project
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Lectures - download before class
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Week1_Overview.html">
   Week 1
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_1.html">
     Lecture 1 (3/28/2022)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_2-pre.html">
     Lecture 2 (3/30/22)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_3-pre.html">
     Lecture 3 (4/1/22)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Week2_Overview.html">
   Week 2
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_4-pre.html">
     Lecture 4 (4/4/22)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_5-pre.html">
     Lecture 5 (4/6/22)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_6-pre.html">
     Lecture 6 (4/8/22)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Week3_Overview.html">
   Week 3
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_7-pre.html">
     Lecture 7 (guest) - Introduction to Data Visualization in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_8.html">
     Lecture 8 (4/13/2022)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_9-pre.html">
     Lecture 9 (guest) - Data Visualization with Seaborn
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Week4_Overview.html">
   Week 4
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_10-pre.html">
     Lecture 10 (4/18/22)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_11-pre.html">
     Lecture 11 (4/20/2022)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_12-pre.html">
     Lecture 12 (4/22/2022)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Week5_Overview.html">
   Week 5
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_13-pre.html">
     Lecture 13 (4/25/22)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_14-pre.html">
     Lecture 14 (4/27/2022)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_15-pre.html">
     Lecture 15 (4/29/2022)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Week6_Overview.html">
   Week 6
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_16-pre.html">
     Lecture 16 (5/2/2022)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_17-pre.html">
     Lecture 17 (5/4/2022)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_18-pre.html">
     Lecture 18 (5/6/2022)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Week7_Overview.html">
   Week 7
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_19-pre.html">
     Lecture 19 (5/9/2022)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_20-pre.html">
     Lecture 20 (5/11/2022)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_21-pre.html">
     Lecture 21 (5/13/2022)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Week8_Overview.html">
   Week 8
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_22-pre.html">
     Lecture 22 (5/16/2022)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_23-pre.html">
     Lecture 23 (5/18/2022)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_24-pre.html">
     Lecture 24 (5/20/2022)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Week9_Overview.html">
   Week 9
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_25-pre.html">
     Lecture 25 (5/23/2022)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_26-pre.html">
     Lecture 26 (5/25/2022)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_27-pre.html">
     Lecture 27 (5/27/2022)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Week10_Overview.html">
   Week 10
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Lecture_28-pre.html">
     Lecture 28 (6/3/2022)
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Lecture code - available after class
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_2-post.html">
   Lecture 2 (3/30/22)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_3-post.html">
   Lecture 3 (4/1/22)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_4-post.html">
   Lecture 4 (4/4/22)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_5-post.html">
   Lecture 5 (4/6/22)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_6-post.html">
   Lecture 6 (4/8/22)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_7-post.html">
   Lecture 7 (guest) - Introduction to Data Visualization in Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_9-post.html">
   Lecture 9 (guest) Data Visualization with Seaborn
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_10-post.html">
   Lecture 10 (4/18/22)
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Lecture 11 (4/20/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_12-post.html">
   Lecture 12 (4/22/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_13-post.html">
   Lecture 13 (4/25/22)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_14-post.html">
   Lecture 14 (4/27/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_15-post.html">
   Lecture 15 (4/29/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_16-post.html">
   Lecture 16 (5/2/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_17-post.html">
   Lecture 17 (5/4/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_18-post.html">
   Lecture 18 (5/6/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_19-post.html">
   Lecture 19 (5/9/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_20-post.html">
   Lecture 20 (5/11/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_21-post.html">
   Lecture 21 (5/13/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_22-post.html">
   Lecture 22 (5/16/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_23-post.html">
   Lecture 23 (5/18/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_24-post.html">
   Lecture 24 (5/20/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_25-post.html">
   Lecture 25 (5/23/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_26-post.html">
   Lecture 26 (5/25/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_27-post.html">
   Lecture 27 (5/27/2022)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Lecture_28-post.html">
   Lecture 28 (6/3/2022)
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/lectures/sp22/Lecture_11-post.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/erik-brockbank/ucsd-css-002-sp2022.github.io"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/erik-brockbank/ucsd-css-002-sp2022.github.io/issues/new?title=Issue%20on%20page%20%2Flectures/sp22/Lecture_11-post.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/erik-brockbank/ucsd-css-002-sp2022.github.io/master?urlpath=tree/lectures/sp22/Lecture_11-post.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Lecture 11 (4/20/2022)
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#wide-and-long-data">
   Wide and Long Data
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-wide-data">
     What is
     <em>
      wide
     </em>
     data?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#so-what-s-the-problem">
     So what‚Äôs the problem?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-do-we-do-about-this-answer-tidy-long-data">
     What do we do about this? Answer: tidy (long) data!
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#so-what-does-tidy-data-do-for-us">
     So what does
     <em>
      tidy
     </em>
     data do for us?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pandas-helps-you-convert-data-easily">
     Pandas helps you convert data easily
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#converting-from-wide-to-long-with-melt">
       Converting from wide to long with
       <code class="docutils literal notranslate">
        <span class="pre">
         melt
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#converting-from-long-to-wide-with-pivot">
       Converting from long to wide with
       <code class="docutils literal notranslate">
        <span class="pre">
         pivot
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bonus-stack-and-unstack">
     Bonus:
     <code class="docutils literal notranslate">
      <span class="pre">
       stack
      </span>
     </code>
     and
     <code class="docutils literal notranslate">
      <span class="pre">
       unstack
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="lecture-11-4-20-2022">
<h1>Lecture 11 (4/20/2022)<a class="headerlink" href="#lecture-11-4-20-2022" title="Permalink to this headline">¬∂</a></h1>
<p><strong>Announcements</strong></p>
<ul class="simple">
<li><p>Problem set 3 coming out today, will be due <em>next Wednesday</em> 4/27</p></li>
</ul>
<p><em>Last time we covered:</em></p>
<ul class="simple">
<li><p>Data cleaning with python (duplicates, missing data, outliers)</p></li>
</ul>
<p><strong>Today‚Äôs agenda:</strong></p>
<ul class="simple">
<li><p><em>Wide</em> versus <em>long</em> data</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="wide-and-long-data">
<h1>Wide and Long Data<a class="headerlink" href="#wide-and-long-data" title="Permalink to this headline">¬∂</a></h1>
<blockquote>
<div><p>‚ÄúLike families, tidy datasets are all alike but every messy dataset is messy in its own way.‚Äù
~ Hadley Wickham</p>
</div></blockquote>
<div class="section" id="what-is-wide-data">
<h2>What is <em>wide</em> data?<a class="headerlink" href="#what-is-wide-data" title="Permalink to this headline">¬∂</a></h2>
<p>‚Ä¶</p>
<p>When we interact with data that‚Äôs made to be read by people, it‚Äôs most often in <em>wide</em> format.</p>
<p>The definition of wide data can be a little hard to pin down but one rule of thumb is that <em>wide</em> data spreads multiple observations or variables across columns in a given row.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>y</p></th>
<th class="head"><p>x1</p></th>
<th class="head"><p>x2</p></th>
<th class="head"><p>x3</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>a</p></td>
<td><p>b</p></td>
<td><p>c</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>d</p></td>
<td><p>e</p></td>
<td><p>f</p></td>
</tr>
<tr class="row-even"><td><p>‚Ä¶</p></td>
<td><p>‚Ä¶</p></td>
<td><p>‚Ä¶</p></td>
<td><p>‚Ä¶</p></td>
</tr>
</tbody>
</table>
<p>Here‚Äôs some data I made up about average temperatures in five US cities over three consecutive years:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cities</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;City&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;San Diego&quot;</span><span class="p">,</span> <span class="s2">&quot;Denver&quot;</span><span class="p">,</span> <span class="s2">&quot;New York City&quot;</span><span class="p">,</span> <span class="s2">&quot;Los Angeles&quot;</span><span class="p">,</span> <span class="s2">&quot;San Francisco&quot;</span><span class="p">],</span>
    <span class="s2">&quot;2010&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">75</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">70</span><span class="p">],</span>
    <span class="s2">&quot;2011&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">77</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">72</span><span class="p">],</span>
    <span class="s2">&quot;2012&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">77</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">71</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">cities</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>City</th>
      <th>2010</th>
      <th>2011</th>
      <th>2012</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>San Diego</td>
      <td>75</td>
      <td>77</td>
      <td>77</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Denver</td>
      <td>60</td>
      <td>63</td>
      <td>62</td>
    </tr>
    <tr>
      <th>2</th>
      <td>New York City</td>
      <td>55</td>
      <td>58</td>
      <td>56</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Los Angeles</td>
      <td>65</td>
      <td>67</td>
      <td>67</td>
    </tr>
    <tr>
      <th>4</th>
      <td>San Francisco</td>
      <td>70</td>
      <td>72</td>
      <td>71</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>This data can also be presented with <em>year</em> as our variable of interest and each city as a column:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">years</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;Year&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2012</span><span class="p">],</span>
    <span class="s2">&quot;San Diego&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">75</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">77</span><span class="p">],</span>
    <span class="s2">&quot;Denver&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">62</span><span class="p">],</span>
    <span class="s2">&quot;New York City&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">55</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">56</span><span class="p">],</span>
    <span class="s2">&quot;Los Angeles&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">65</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">67</span><span class="p">],</span>
    <span class="s2">&quot;San Francisco&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">71</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">years</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Year</th>
      <th>San Diego</th>
      <th>Denver</th>
      <th>New York City</th>
      <th>Los Angeles</th>
      <th>San Francisco</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2010</td>
      <td>75</td>
      <td>60</td>
      <td>55</td>
      <td>65</td>
      <td>70</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2011</td>
      <td>77</td>
      <td>63</td>
      <td>58</td>
      <td>67</td>
      <td>72</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2012</td>
      <td>77</td>
      <td>62</td>
      <td>56</td>
      <td>67</td>
      <td>71</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Both of these are pretty easy to read and pretty intuitive.</p>
<p><strong>What kind of questions can we answer most easily with each dataframe?</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">cities</span></code>: how do the cities differ in their temperatures?</p>
<p><code class="docutils literal notranslate"><span class="pre">years</span></code>: which year was the warmest?</p>
<p>Note: this is easiest to illustrate with <em>time sequence</em> data, but most data can be toggled around this way to some degree:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">students</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;Student&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Erik&quot;</span><span class="p">,</span> <span class="s2">&quot;Amanda&quot;</span><span class="p">,</span> <span class="s2">&quot;Maia&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Math&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">80</span><span class="p">],</span>
    <span class="s2">&quot;Writing&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">95</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">students</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Student</th>
      <th>Math</th>
      <th>Writing</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Erik</td>
      <td>90</td>
      <td>90</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Amanda</td>
      <td>95</td>
      <td>85</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Maia</td>
      <td>80</td>
      <td>95</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">classes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;Subject&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Math&quot;</span><span class="p">,</span> <span class="s2">&quot;Writing&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Erik&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">95</span><span class="p">],</span>
    <span class="s2">&quot;Amanda&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">95</span><span class="p">,</span> <span class="mi">85</span><span class="p">],</span>
    <span class="s2">&quot;Maia&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">95</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">classes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Subject</th>
      <th>Erik</th>
      <th>Amanda</th>
      <th>Maia</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Math</td>
      <td>80</td>
      <td>95</td>
      <td>80</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Writing</td>
      <td>95</td>
      <td>85</td>
      <td>95</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The first table makes it easier to ask questions like ‚Äúwhich student performed best?‚Äù, while the second is easier for asking questions like ‚Äúare these students better at math or writing?‚Äù</p>
<p><strong>Self-quiz:</strong> do the above examples give you an okay intuition for what <em>wide</em> data looks like?</p>
</div>
<div class="section" id="so-what-s-the-problem">
<h2>So what‚Äôs the problem?<a class="headerlink" href="#so-what-s-the-problem" title="Permalink to this headline">¬∂</a></h2>
<ol class="simple">
<li><p>First, the exercise above suggests that for different kinds of questions, we need to format our data in different ways. That seems onerous‚Ä¶</p></li>
<li><p>Second, even though tables like this make these data easy to read as humans, answering questions about the data when it‚Äôs formatted like this can be difficult and inefficient.</p></li>
</ol>
<p><em>Using the data below, how do we figure out which city was hottest on average (using our python skills)?</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cities</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>City</th>
      <th>2010</th>
      <th>2011</th>
      <th>2012</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>San Diego</td>
      <td>75</td>
      <td>77</td>
      <td>77</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Denver</td>
      <td>60</td>
      <td>63</td>
      <td>62</td>
    </tr>
    <tr>
      <th>2</th>
      <td>New York City</td>
      <td>55</td>
      <td>58</td>
      <td>56</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Los Angeles</td>
      <td>65</td>
      <td>67</td>
      <td>67</td>
    </tr>
    <tr>
      <th>4</th>
      <td>San Francisco</td>
      <td>70</td>
      <td>72</td>
      <td>71</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># CODE HERE</span>
<span class="n">cities</span>
<span class="c1"># for loop over rows and compute value</span>

<span class="n">cities</span> <span class="o">=</span> <span class="n">cities</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">avg</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">row</span><span class="p">[[</span><span class="s1">&#39;2010&#39;</span><span class="p">,</span> <span class="s1">&#39;2011&#39;</span><span class="p">,</span> <span class="s1">&#39;2012&#39;</span><span class="p">]],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">cities</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>City</th>
      <th>2010</th>
      <th>2011</th>
      <th>2012</th>
      <th>avg</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>San Diego</td>
      <td>75</td>
      <td>77</td>
      <td>77</td>
      <td>76.333333</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Denver</td>
      <td>60</td>
      <td>63</td>
      <td>62</td>
      <td>61.666667</td>
    </tr>
    <tr>
      <th>2</th>
      <td>New York City</td>
      <td>55</td>
      <td>58</td>
      <td>56</td>
      <td>56.333333</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Los Angeles</td>
      <td>65</td>
      <td>67</td>
      <td>67</td>
      <td>66.333333</td>
    </tr>
    <tr>
      <th>4</th>
      <td>San Francisco</td>
      <td>70</td>
      <td>72</td>
      <td>71</td>
      <td>71.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Notice that we have to do this by calculating an average row by row. Seems inefficient.</p>
<p>Can we do any better with our <code class="docutils literal notranslate"><span class="pre">years</span></code> dataframe?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">years</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Year</th>
      <th>San Diego</th>
      <th>Denver</th>
      <th>New York City</th>
      <th>Los Angeles</th>
      <th>San Francisco</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2010</td>
      <td>75</td>
      <td>60</td>
      <td>55</td>
      <td>65</td>
      <td>70</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2011</td>
      <td>77</td>
      <td>63</td>
      <td>58</td>
      <td>67</td>
      <td>72</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2012</td>
      <td>77</td>
      <td>62</td>
      <td>56</td>
      <td>67</td>
      <td>71</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># CODE HERE</span>

<span class="c1"># ???</span>
</pre></div>
</div>
</div>
</div>
<p><em>Using the data below, how do we decide which year had the highest recorded temperature across these cities?</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">years</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Year</th>
      <th>San Diego</th>
      <th>Denver</th>
      <th>New York City</th>
      <th>Los Angeles</th>
      <th>San Francisco</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2010</td>
      <td>75</td>
      <td>60</td>
      <td>55</td>
      <td>65</td>
      <td>70</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2011</td>
      <td>77</td>
      <td>63</td>
      <td>58</td>
      <td>67</td>
      <td>72</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2012</td>
      <td>77</td>
      <td>62</td>
      <td>56</td>
      <td>67</td>
      <td>71</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># CODE HERE</span>

<span class="n">years</span> <span class="o">=</span> <span class="n">years</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">temp</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">row</span><span class="p">[[</span><span class="s1">&#39;San Diego&#39;</span><span class="p">,</span> <span class="s1">&#39;Los Angeles&#39;</span><span class="p">]],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">years</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Year</th>
      <th>San Diego</th>
      <th>Denver</th>
      <th>New York City</th>
      <th>Los Angeles</th>
      <th>San Francisco</th>
      <th>temp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2010</td>
      <td>75</td>
      <td>60</td>
      <td>55</td>
      <td>65</td>
      <td>70</td>
      <td>70.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2011</td>
      <td>77</td>
      <td>63</td>
      <td>58</td>
      <td>67</td>
      <td>72</td>
      <td>72.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2012</td>
      <td>77</td>
      <td>62</td>
      <td>56</td>
      <td>67</td>
      <td>71</td>
      <td>72.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Yikes üò¨</p>
<p><strong>Self-quiz:</strong> is it clear how data that‚Äôs easy to read in wide format can be kind of tricky to interact with when trying to analyze it in python?</p>
</div>
<div class="section" id="what-do-we-do-about-this-answer-tidy-long-data">
<h2>What do we do about this? Answer: tidy (long) data!<a class="headerlink" href="#what-do-we-do-about-this-answer-tidy-long-data" title="Permalink to this headline">¬∂</a></h2>
<p>With <em>long</em> or <em>tidy</em> data, every observation gets its own row, with columns indicating the variable values that correpond to that observation.</p>
<p>The <em>wide</em> table at the beginning of the previous section looked like this:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>y</p></th>
<th class="head"><p>x1</p></th>
<th class="head"><p>x2</p></th>
<th class="head"><p>x3</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>a</p></td>
<td><p>b</p></td>
<td><p>c</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>d</p></td>
<td><p>e</p></td>
<td><p>f</p></td>
</tr>
<tr class="row-even"><td><p>‚Ä¶</p></td>
<td><p>‚Ä¶</p></td>
<td><p>‚Ä¶</p></td>
<td><p>‚Ä¶</p></td>
</tr>
</tbody>
</table>
<p>Compare the table above to this one:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>y</p></th>
<th class="head"><p>variable</p></th>
<th class="head"><p>value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>x1</p></td>
<td><p>a</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>x2</p></td>
<td><p>b</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>x3</p></td>
<td><p>c</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>x1</p></td>
<td><p>d</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>x2</p></td>
<td><p>e</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>x3</p></td>
<td><p>f</p></td>
</tr>
<tr class="row-even"><td><p>‚Ä¶</p></td>
<td><p>‚Ä¶</p></td>
<td><p>‚Ä¶</p></td>
</tr>
</tbody>
</table>
<p>Here‚Äôs a concrete example with the student data above.</p>
<p>In wide form, it looked like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">students</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Student</th>
      <th>Math</th>
      <th>Writing</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Erik</td>
      <td>90</td>
      <td>90</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Amanda</td>
      <td>95</td>
      <td>85</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Maia</td>
      <td>80</td>
      <td>95</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>In <em>tidy</em> form, it looks like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tidy_students</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;Student&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Erik&quot;</span><span class="p">,</span> <span class="s2">&quot;Erik&quot;</span><span class="p">,</span> <span class="s2">&quot;Amanda&quot;</span><span class="p">,</span> <span class="s2">&quot;Amanda&quot;</span><span class="p">,</span> <span class="s2">&quot;Maia&quot;</span><span class="p">,</span> <span class="s2">&quot;Maia&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Subject&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Math&quot;</span><span class="p">,</span> <span class="s2">&quot;Writing&quot;</span><span class="p">,</span> <span class="s2">&quot;Math&quot;</span><span class="p">,</span> <span class="s2">&quot;Writing&quot;</span><span class="p">,</span> <span class="s2">&quot;Math&quot;</span><span class="p">,</span> <span class="s2">&quot;Writing&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Score&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">95</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">tidy_students</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Student</th>
      <th>Subject</th>
      <th>Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Erik</td>
      <td>Math</td>
      <td>90</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Erik</td>
      <td>Writing</td>
      <td>90</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Amanda</td>
      <td>Math</td>
      <td>95</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Amanda</td>
      <td>Writing</td>
      <td>85</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Maia</td>
      <td>Math</td>
      <td>80</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Maia</td>
      <td>Writing</td>
      <td>95</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><strong>Self-quiz:</strong> is it clear how the <em>tidy</em> data here differs from <em>wide</em> data?</p>
<p>If you want to go into the weeds on this, <a class="reference external" href="https://www.jstatsoft.org/article/view/v059i10">here‚Äôs</a> a paper by the inventor of <code class="docutils literal notranslate"><span class="pre">tidyverse</span></code>, a large library in R with many similar functions to <code class="docutils literal notranslate"><span class="pre">pandas</span></code>.</p>
</div>
<div class="section" id="so-what-does-tidy-data-do-for-us">
<h2>So what does <em>tidy</em> data do for us?<a class="headerlink" href="#so-what-does-tidy-data-do-for-us" title="Permalink to this headline">¬∂</a></h2>
<p>The tidy data in the previous examples are harder to read and harder to interpret in the ways we often want to think about tabular data.</p>
<p><em>So how does this help us?</em></p>
<p><strong>Summary</strong></p>
<ul class="simple">
<li><p>Tidy data avoids the pitfalls of having to reformat our data for different kinds of questions (usually)</p></li>
<li><p>Tidy data enforces structure so there isn‚Äôt confusion about how best to represent our data (there may be multiple wide formats but usually only one tidy format) -&gt; <em>best practice</em></p></li>
<li><p>Tidy data is easier to interact with and analyze with code</p></li>
<li><p>Tidy data lets us take advantage of the <em>vectorization</em> that numpy, pandas, and other modern coding languages employ to make calculations super speedy</p></li>
</ul>
<p><strong>Example</strong></p>
<p>Let‚Äôs go through a simple example with the temperature data above.</p>
<p>Here‚Äôs the original wide dataframe:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cities</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>City</th>
      <th>2010</th>
      <th>2011</th>
      <th>2012</th>
      <th>avg</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>San Diego</td>
      <td>75</td>
      <td>77</td>
      <td>77</td>
      <td>76.333333</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Denver</td>
      <td>60</td>
      <td>63</td>
      <td>62</td>
      <td>61.666667</td>
    </tr>
    <tr>
      <th>2</th>
      <td>New York City</td>
      <td>55</td>
      <td>58</td>
      <td>56</td>
      <td>56.333333</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Los Angeles</td>
      <td>65</td>
      <td>67</td>
      <td>67</td>
      <td>66.333333</td>
    </tr>
    <tr>
      <th>4</th>
      <td>San Francisco</td>
      <td>70</td>
      <td>72</td>
      <td>71</td>
      <td>71.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Here it is in tidy format:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tidy_cities</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;City&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;San Diego&quot;</span><span class="p">,</span> <span class="s2">&quot;San Diego&quot;</span><span class="p">,</span> <span class="s2">&quot;San Diego&quot;</span><span class="p">,</span> 
             <span class="s2">&quot;Denver&quot;</span><span class="p">,</span> <span class="s2">&quot;Denver&quot;</span><span class="p">,</span> <span class="s2">&quot;Denver&quot;</span><span class="p">,</span> 
             <span class="s2">&quot;New York City&quot;</span><span class="p">,</span> <span class="s2">&quot;New York City&quot;</span><span class="p">,</span> <span class="s2">&quot;New York City&quot;</span><span class="p">,</span> 
             <span class="s2">&quot;Los Angeles&quot;</span><span class="p">,</span> <span class="s2">&quot;Los Angeles&quot;</span><span class="p">,</span> <span class="s2">&quot;Los Angeles&quot;</span><span class="p">,</span> 
             <span class="s2">&quot;San Francisco&quot;</span><span class="p">,</span> <span class="s2">&quot;San Francisco&quot;</span><span class="p">,</span> <span class="s2">&quot;San Francisco&quot;</span>
            <span class="p">],</span>
    <span class="s2">&quot;Year&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2012</span><span class="p">,</span> 
             <span class="mi">2010</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2012</span><span class="p">,</span> 
             <span class="mi">2010</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2012</span><span class="p">,</span> 
             <span class="mi">2010</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2012</span><span class="p">,</span> 
             <span class="mi">2010</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2012</span>
            <span class="p">],</span>
    <span class="s2">&quot;Temp&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">75</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span>
             <span class="mi">60</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span>
             <span class="mi">55</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span>
             <span class="mi">65</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span>
             <span class="mi">70</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">71</span>
            <span class="p">]</span>
<span class="p">})</span>

<span class="n">tidy_cities</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>City</th>
      <th>Year</th>
      <th>Temp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>San Diego</td>
      <td>2010</td>
      <td>75</td>
    </tr>
    <tr>
      <th>1</th>
      <td>San Diego</td>
      <td>2011</td>
      <td>77</td>
    </tr>
    <tr>
      <th>2</th>
      <td>San Diego</td>
      <td>2012</td>
      <td>77</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Denver</td>
      <td>2010</td>
      <td>60</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Denver</td>
      <td>2011</td>
      <td>63</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Denver</td>
      <td>2012</td>
      <td>62</td>
    </tr>
    <tr>
      <th>6</th>
      <td>New York City</td>
      <td>2010</td>
      <td>55</td>
    </tr>
    <tr>
      <th>7</th>
      <td>New York City</td>
      <td>2011</td>
      <td>58</td>
    </tr>
    <tr>
      <th>8</th>
      <td>New York City</td>
      <td>2012</td>
      <td>56</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Los Angeles</td>
      <td>2010</td>
      <td>65</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Los Angeles</td>
      <td>2011</td>
      <td>67</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Los Angeles</td>
      <td>2012</td>
      <td>67</td>
    </tr>
    <tr>
      <th>12</th>
      <td>San Francisco</td>
      <td>2010</td>
      <td>70</td>
    </tr>
    <tr>
      <th>13</th>
      <td>San Francisco</td>
      <td>2011</td>
      <td>72</td>
    </tr>
    <tr>
      <th>14</th>
      <td>San Francisco</td>
      <td>2012</td>
      <td>71</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Now, let‚Äôs return to our original question: <em>which city was the hottest on average during this time?</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># CODE HERE</span>

<span class="n">tidy_cities</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
    <span class="p">[</span><span class="s1">&#39;City&#39;</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
    <span class="n">city_avg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Temp&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span>
<span class="p">)</span><span class="o">.</span><span class="n">nlargest</span><span class="p">(</span>
    <span class="mi">1</span><span class="p">,</span> 
    <span class="s1">&#39;city_avg&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>City</th>
      <th>city_avg</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3</th>
      <td>San Diego</td>
      <td>76.333333</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>That was pretty easy.</p>
<p>And under the hood, pandas <code class="docutils literal notranslate"><span class="pre">groupby</span></code> means that we compute the average temperature using vectorization rather than calculating row by row as we did in the solution above.</p>
<p>What about our second question: <em>which year had the highest recorded temperature?</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># CODE HERE</span>

<span class="n">tidy_cities</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
    <span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
    <span class="n">year_max</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Temp&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Year</th>
      <th>year_max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2010</td>
      <td>75</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2011</td>
      <td>77</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2012</td>
      <td>77</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Okay, that was also pretty easy.</p>
<p>So, this is far from an exhaustive survey of wide versus tidy/long data, but should give you a flavor for why this distinction is useful.</p>
<p><strong>Self-quiz:</strong> do the examples above make it pretty clear why tidy data makes our lives simpler, clearer, and easier for coding / analysis?</p>
</div>
<div class="section" id="pandas-helps-you-convert-data-easily">
<h2>Pandas helps you convert data easily<a class="headerlink" href="#pandas-helps-you-convert-data-easily" title="Permalink to this headline">¬∂</a></h2>
<p>Lots of data in the real world comes in wide form or requires some re-shuffling to get into tidy format.</p>
<p>If you‚Äôre working with a dataset that isn‚Äôt in tidy form, it‚Äôs almost always a good first step.</p>
<p>We‚Äôll quickly review the tools that <code class="docutils literal notranslate"><span class="pre">pandas</span></code> has for toggling data formats.</p>
<p>Much more info about this <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/reshaping.html">here</a>.</p>
<div class="section" id="converting-from-wide-to-long-with-melt">
<h3>Converting from wide to long with <code class="docutils literal notranslate"><span class="pre">melt</span></code><a class="headerlink" href="#converting-from-wide-to-long-with-melt" title="Permalink to this headline">¬∂</a></h3>
<p>First, let‚Äôs turn to a familiar dataset: the <code class="docutils literal notranslate"><span class="pre">gapminder</span></code> data.</p>
<p><em>Is this data in tidy form?</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gap</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/UCSD-CSS-002/ucsd-css-002.github.io/master/datasets/gapminder.csv&quot;</span><span class="p">)</span>

<span class="n">gap</span>
<span class="c1"># gap.shape # note the size. Things are about to change...</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>country</th>
      <th>continent</th>
      <th>year</th>
      <th>lifeExp</th>
      <th>pop</th>
      <th>gdpPercap</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>1952</td>
      <td>28.801</td>
      <td>8425333</td>
      <td>779.445314</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>1957</td>
      <td>30.332</td>
      <td>9240934</td>
      <td>820.853030</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>1962</td>
      <td>31.997</td>
      <td>10267083</td>
      <td>853.100710</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>1967</td>
      <td>34.020</td>
      <td>11537966</td>
      <td>836.197138</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>1972</td>
      <td>36.088</td>
      <td>13079460</td>
      <td>739.981106</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1699</th>
      <td>1700</td>
      <td>Zimbabwe</td>
      <td>Africa</td>
      <td>1987</td>
      <td>62.351</td>
      <td>9216418</td>
      <td>706.157306</td>
    </tr>
    <tr>
      <th>1700</th>
      <td>1701</td>
      <td>Zimbabwe</td>
      <td>Africa</td>
      <td>1992</td>
      <td>60.377</td>
      <td>10704340</td>
      <td>693.420786</td>
    </tr>
    <tr>
      <th>1701</th>
      <td>1702</td>
      <td>Zimbabwe</td>
      <td>Africa</td>
      <td>1997</td>
      <td>46.809</td>
      <td>11404948</td>
      <td>792.449960</td>
    </tr>
    <tr>
      <th>1702</th>
      <td>1703</td>
      <td>Zimbabwe</td>
      <td>Africa</td>
      <td>2002</td>
      <td>39.989</td>
      <td>11926563</td>
      <td>672.038623</td>
    </tr>
    <tr>
      <th>1703</th>
      <td>1704</td>
      <td>Zimbabwe</td>
      <td>Africa</td>
      <td>2007</td>
      <td>43.487</td>
      <td>12311143</td>
      <td>469.709298</td>
    </tr>
  </tbody>
</table>
<p>1704 rows √ó 7 columns</p>
</div></div></div>
</div>
<p>Let‚Äôs move the ‚Äúobservations‚Äù (<code class="docutils literal notranslate"><span class="pre">lifeExp</span></code>, <code class="docutils literal notranslate"><span class="pre">pop</span></code>, and <code class="docutils literal notranslate"><span class="pre">gdpPercap</span></code>) to their own rows using <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.melt.html#pandas.melt"><code class="docutils literal notranslate"><span class="pre">melt</span></code></a>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gap_tidy</span> <span class="o">=</span> <span class="n">gap</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span>
    <span class="n">id_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Unnamed: 0&quot;</span><span class="p">,</span> <span class="s2">&quot;country&quot;</span><span class="p">,</span> <span class="s2">&quot;continent&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">],</span> <span class="c1"># columns to keep in each row</span>
    <span class="n">value_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span> <span class="s2">&quot;pop&quot;</span><span class="p">,</span> <span class="s2">&quot;gdpPercap&quot;</span><span class="p">],</span> <span class="c1"># columns to be moved into their own rows</span>
    <span class="n">var_name</span> <span class="o">=</span> <span class="s2">&quot;measure&quot;</span><span class="p">,</span> <span class="c1"># name of the column that will store the &quot;value_vars&quot; column names</span>
    <span class="n">value_name</span> <span class="o">=</span> <span class="s2">&quot;value&quot;</span> <span class="c1"># name of the column that will store the &quot;value_vars&quot; column values</span>
<span class="p">)</span>

<span class="n">gap_tidy</span> <span class="c1"># take a look at the data. Is this what you expected?</span>

<span class="c1"># gap_tidy.shape # note how many rows we added with this</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>country</th>
      <th>continent</th>
      <th>year</th>
      <th>measure</th>
      <th>value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>1952</td>
      <td>lifeExp</td>
      <td>28.801000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>1957</td>
      <td>lifeExp</td>
      <td>30.332000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>1962</td>
      <td>lifeExp</td>
      <td>31.997000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>1967</td>
      <td>lifeExp</td>
      <td>34.020000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>1972</td>
      <td>lifeExp</td>
      <td>36.088000</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>5107</th>
      <td>1700</td>
      <td>Zimbabwe</td>
      <td>Africa</td>
      <td>1987</td>
      <td>gdpPercap</td>
      <td>706.157306</td>
    </tr>
    <tr>
      <th>5108</th>
      <td>1701</td>
      <td>Zimbabwe</td>
      <td>Africa</td>
      <td>1992</td>
      <td>gdpPercap</td>
      <td>693.420786</td>
    </tr>
    <tr>
      <th>5109</th>
      <td>1702</td>
      <td>Zimbabwe</td>
      <td>Africa</td>
      <td>1997</td>
      <td>gdpPercap</td>
      <td>792.449960</td>
    </tr>
    <tr>
      <th>5110</th>
      <td>1703</td>
      <td>Zimbabwe</td>
      <td>Africa</td>
      <td>2002</td>
      <td>gdpPercap</td>
      <td>672.038623</td>
    </tr>
    <tr>
      <th>5111</th>
      <td>1704</td>
      <td>Zimbabwe</td>
      <td>Africa</td>
      <td>2007</td>
      <td>gdpPercap</td>
      <td>469.709298</td>
    </tr>
  </tbody>
</table>
<p>5112 rows √ó 6 columns</p>
</div></div></div>
</div>
<p>What can we do with this?</p>
<p>Quick example!</p>
<p>(think about how we would do the below with our data in wide format)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gap_tidy</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
    <span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">,</span> <span class="s1">&#39;measure&#39;</span><span class="p">]</span>
<span class="p">)[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>measure</th>
      <th>value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Afghanistan</td>
      <td>gdpPercap</td>
      <td>8.026746e+02</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Afghanistan</td>
      <td>lifeExp</td>
      <td>3.747883e+01</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Afghanistan</td>
      <td>pop</td>
      <td>1.582372e+07</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Albania</td>
      <td>gdpPercap</td>
      <td>3.255367e+03</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Albania</td>
      <td>lifeExp</td>
      <td>6.843292e+01</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>421</th>
      <td>Zambia</td>
      <td>lifeExp</td>
      <td>4.599633e+01</td>
    </tr>
    <tr>
      <th>422</th>
      <td>Zambia</td>
      <td>pop</td>
      <td>6.353805e+06</td>
    </tr>
    <tr>
      <th>423</th>
      <td>Zimbabwe</td>
      <td>gdpPercap</td>
      <td>6.358580e+02</td>
    </tr>
    <tr>
      <th>424</th>
      <td>Zimbabwe</td>
      <td>lifeExp</td>
      <td>5.266317e+01</td>
    </tr>
    <tr>
      <th>425</th>
      <td>Zimbabwe</td>
      <td>pop</td>
      <td>7.641966e+06</td>
    </tr>
  </tbody>
</table>
<p>426 rows √ó 3 columns</p>
</div></div></div>
</div>
</div>
<div class="section" id="converting-from-long-to-wide-with-pivot">
<h3>Converting from long to wide with <code class="docutils literal notranslate"><span class="pre">pivot</span></code><a class="headerlink" href="#converting-from-long-to-wide-with-pivot" title="Permalink to this headline">¬∂</a></h3>
<p>But wait! I thought we wanted our data in tidy format???</p>
<p>The <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.pivot.html"><code class="docutils literal notranslate"><span class="pre">pivot</span></code></a> function makes it easy for us to convert to wide format when it‚Äôs convenient.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gap_wide</span> <span class="o">=</span> <span class="n">gap_tidy</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
    <span class="n">index</span> <span class="o">=</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="c1"># column to be treated as the index</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;measure&quot;</span><span class="p">,</span> <span class="s2">&quot;country&quot;</span><span class="p">],</span> <span class="c1"># columns to be spread out into their own columns for each value</span>
    <span class="n">values</span> <span class="o">=</span> <span class="s2">&quot;value&quot;</span> <span class="c1"># value to be inserted in each new column</span>
<span class="p">)</span>

<span class="n">gap_wide</span>
<span class="c1"># gap_wide.shape # this is super condensed</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th>measure</th>
      <th colspan="10" halign="left">lifeExp</th>
      <th>...</th>
      <th colspan="10" halign="left">gdpPercap</th>
    </tr>
    <tr>
      <th>country</th>
      <th>Afghanistan</th>
      <th>Albania</th>
      <th>Algeria</th>
      <th>Angola</th>
      <th>Argentina</th>
      <th>Australia</th>
      <th>Austria</th>
      <th>Bahrain</th>
      <th>Bangladesh</th>
      <th>Belgium</th>
      <th>...</th>
      <th>Uganda</th>
      <th>United Kingdom</th>
      <th>United States</th>
      <th>Uruguay</th>
      <th>Venezuela</th>
      <th>Vietnam</th>
      <th>West Bank and Gaza</th>
      <th>Yemen, Rep.</th>
      <th>Zambia</th>
      <th>Zimbabwe</th>
    </tr>
    <tr>
      <th>year</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1952</th>
      <td>28.801</td>
      <td>55.230</td>
      <td>43.077</td>
      <td>30.015</td>
      <td>62.485</td>
      <td>69.120</td>
      <td>66.800</td>
      <td>50.939</td>
      <td>37.484</td>
      <td>68.000</td>
      <td>...</td>
      <td>734.753484</td>
      <td>9979.508487</td>
      <td>13990.48208</td>
      <td>5716.766744</td>
      <td>7689.799761</td>
      <td>605.066492</td>
      <td>1515.592329</td>
      <td>781.717576</td>
      <td>1147.388831</td>
      <td>406.884115</td>
    </tr>
    <tr>
      <th>1957</th>
      <td>30.332</td>
      <td>59.280</td>
      <td>45.685</td>
      <td>31.999</td>
      <td>64.399</td>
      <td>70.330</td>
      <td>67.480</td>
      <td>53.832</td>
      <td>39.348</td>
      <td>69.240</td>
      <td>...</td>
      <td>774.371069</td>
      <td>11283.177950</td>
      <td>14847.12712</td>
      <td>6150.772969</td>
      <td>9802.466526</td>
      <td>676.285448</td>
      <td>1827.067742</td>
      <td>804.830455</td>
      <td>1311.956766</td>
      <td>518.764268</td>
    </tr>
    <tr>
      <th>1962</th>
      <td>31.997</td>
      <td>64.820</td>
      <td>48.303</td>
      <td>34.000</td>
      <td>65.142</td>
      <td>70.930</td>
      <td>69.540</td>
      <td>56.923</td>
      <td>41.216</td>
      <td>70.250</td>
      <td>...</td>
      <td>767.271740</td>
      <td>12477.177070</td>
      <td>16173.14586</td>
      <td>5603.357717</td>
      <td>8422.974165</td>
      <td>772.049160</td>
      <td>2198.956312</td>
      <td>825.623201</td>
      <td>1452.725766</td>
      <td>527.272182</td>
    </tr>
    <tr>
      <th>1967</th>
      <td>34.020</td>
      <td>66.220</td>
      <td>51.407</td>
      <td>35.985</td>
      <td>65.634</td>
      <td>71.100</td>
      <td>70.140</td>
      <td>59.923</td>
      <td>43.453</td>
      <td>70.940</td>
      <td>...</td>
      <td>908.918522</td>
      <td>14142.850890</td>
      <td>19530.36557</td>
      <td>5444.619620</td>
      <td>9541.474188</td>
      <td>637.123289</td>
      <td>2649.715007</td>
      <td>862.442146</td>
      <td>1777.077318</td>
      <td>569.795071</td>
    </tr>
    <tr>
      <th>1972</th>
      <td>36.088</td>
      <td>67.690</td>
      <td>54.518</td>
      <td>37.928</td>
      <td>67.065</td>
      <td>71.930</td>
      <td>70.630</td>
      <td>63.300</td>
      <td>45.252</td>
      <td>71.440</td>
      <td>...</td>
      <td>950.735869</td>
      <td>15895.116410</td>
      <td>21806.03594</td>
      <td>5703.408898</td>
      <td>10505.259660</td>
      <td>699.501644</td>
      <td>3133.409277</td>
      <td>1265.047031</td>
      <td>1773.498265</td>
      <td>799.362176</td>
    </tr>
    <tr>
      <th>1977</th>
      <td>38.438</td>
      <td>68.930</td>
      <td>58.014</td>
      <td>39.483</td>
      <td>68.481</td>
      <td>73.490</td>
      <td>72.170</td>
      <td>65.593</td>
      <td>46.923</td>
      <td>72.800</td>
      <td>...</td>
      <td>843.733137</td>
      <td>17428.748460</td>
      <td>24072.63213</td>
      <td>6504.339663</td>
      <td>13143.950950</td>
      <td>713.537120</td>
      <td>3682.831494</td>
      <td>1829.765177</td>
      <td>1588.688299</td>
      <td>685.587682</td>
    </tr>
    <tr>
      <th>1982</th>
      <td>39.854</td>
      <td>70.420</td>
      <td>61.368</td>
      <td>39.942</td>
      <td>69.942</td>
      <td>74.740</td>
      <td>73.180</td>
      <td>69.052</td>
      <td>50.009</td>
      <td>73.930</td>
      <td>...</td>
      <td>682.266227</td>
      <td>18232.424520</td>
      <td>25009.55914</td>
      <td>6920.223051</td>
      <td>11152.410110</td>
      <td>707.235786</td>
      <td>4336.032082</td>
      <td>1977.557010</td>
      <td>1408.678565</td>
      <td>788.855041</td>
    </tr>
    <tr>
      <th>1987</th>
      <td>40.822</td>
      <td>72.000</td>
      <td>65.799</td>
      <td>39.906</td>
      <td>70.774</td>
      <td>76.320</td>
      <td>74.940</td>
      <td>70.750</td>
      <td>52.819</td>
      <td>75.350</td>
      <td>...</td>
      <td>617.724406</td>
      <td>21664.787670</td>
      <td>29884.35041</td>
      <td>7452.398969</td>
      <td>9883.584648</td>
      <td>820.799445</td>
      <td>5107.197384</td>
      <td>1971.741538</td>
      <td>1213.315116</td>
      <td>706.157306</td>
    </tr>
    <tr>
      <th>1992</th>
      <td>41.674</td>
      <td>71.581</td>
      <td>67.744</td>
      <td>40.647</td>
      <td>71.868</td>
      <td>77.560</td>
      <td>76.040</td>
      <td>72.601</td>
      <td>56.018</td>
      <td>76.460</td>
      <td>...</td>
      <td>644.170797</td>
      <td>22705.092540</td>
      <td>32003.93224</td>
      <td>8137.004775</td>
      <td>10733.926310</td>
      <td>989.023149</td>
      <td>6017.654756</td>
      <td>1879.496673</td>
      <td>1210.884633</td>
      <td>693.420786</td>
    </tr>
    <tr>
      <th>1997</th>
      <td>41.763</td>
      <td>72.950</td>
      <td>69.152</td>
      <td>40.963</td>
      <td>73.275</td>
      <td>78.830</td>
      <td>77.510</td>
      <td>73.925</td>
      <td>59.412</td>
      <td>77.530</td>
      <td>...</td>
      <td>816.559081</td>
      <td>26074.531360</td>
      <td>35767.43303</td>
      <td>9230.240708</td>
      <td>10165.495180</td>
      <td>1385.896769</td>
      <td>7110.667619</td>
      <td>2117.484526</td>
      <td>1071.353818</td>
      <td>792.449960</td>
    </tr>
    <tr>
      <th>2002</th>
      <td>42.129</td>
      <td>75.651</td>
      <td>70.994</td>
      <td>41.003</td>
      <td>74.340</td>
      <td>80.370</td>
      <td>78.980</td>
      <td>74.795</td>
      <td>62.013</td>
      <td>78.320</td>
      <td>...</td>
      <td>927.721002</td>
      <td>29478.999190</td>
      <td>39097.09955</td>
      <td>7727.002004</td>
      <td>8605.047831</td>
      <td>1764.456677</td>
      <td>4515.487575</td>
      <td>2234.820827</td>
      <td>1071.613938</td>
      <td>672.038623</td>
    </tr>
    <tr>
      <th>2007</th>
      <td>43.828</td>
      <td>76.423</td>
      <td>72.301</td>
      <td>42.731</td>
      <td>75.320</td>
      <td>81.235</td>
      <td>79.829</td>
      <td>75.635</td>
      <td>64.062</td>
      <td>79.441</td>
      <td>...</td>
      <td>1056.380121</td>
      <td>33203.261280</td>
      <td>42951.65309</td>
      <td>10611.462990</td>
      <td>11415.805690</td>
      <td>2441.576404</td>
      <td>3025.349798</td>
      <td>2280.769906</td>
      <td>1271.211593</td>
      <td>469.709298</td>
    </tr>
  </tbody>
</table>
<p>12 rows √ó 426 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># We access data in the above by making our way down the hierarchical columns</span>
<span class="n">gap_wide</span><span class="o">.</span><span class="n">columns</span>

<span class="n">gap_wide</span><span class="p">[</span><span class="s1">&#39;lifeExp&#39;</span><span class="p">][</span><span class="s1">&#39;Australia&#39;</span><span class="p">][</span><span class="mi">2002</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>80.37
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This can make things like plotting this data a little easier (no need to filter ahead of time)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">gap_wide</span><span class="p">[</span><span class="s1">&#39;gdpPercap&#39;</span><span class="p">][</span><span class="s1">&#39;United States&#39;</span><span class="p">],</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">gap_wide</span><span class="p">[</span><span class="s1">&#39;lifeExp&#39;</span><span class="p">][</span><span class="s1">&#39;United States&#39;</span><span class="p">]</span>
                   <span class="p">)</span>

<span class="n">g</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Average income ($ GDP / capita)&quot;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Avg. life expectancy (years)&quot;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Income and life expectancy in the US&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Income and life expectancy in the US&#39;)
</pre></div>
</div>
<img alt="../../_images/Lecture_11-post_66_1.png" src="../../_images/Lecture_11-post_66_1.png" />
</div>
</div>
</div>
</div>
<div class="section" id="bonus-stack-and-unstack">
<h2>Bonus: <code class="docutils literal notranslate"><span class="pre">stack</span></code> and <code class="docutils literal notranslate"><span class="pre">unstack</span></code><a class="headerlink" href="#bonus-stack-and-unstack" title="Permalink to this headline">¬∂</a></h2>
<p>A really clear overview <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/reshaping.html#reshaping-by-stacking-and-unstacking">here</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gap_stack</span> <span class="o">=</span> <span class="n">gap_wide</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="s2">&quot;country&quot;</span><span class="p">)</span>

<span class="n">gap_stack</span>
<span class="c1"># gap_stack.columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>measure</th>
      <th>gdpPercap</th>
      <th>lifeExp</th>
      <th>pop</th>
    </tr>
    <tr>
      <th>year</th>
      <th>country</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">1952</th>
      <th>Afghanistan</th>
      <td>779.445314</td>
      <td>28.801</td>
      <td>8425333.0</td>
    </tr>
    <tr>
      <th>Albania</th>
      <td>1601.056136</td>
      <td>55.230</td>
      <td>1282697.0</td>
    </tr>
    <tr>
      <th>Algeria</th>
      <td>2449.008185</td>
      <td>43.077</td>
      <td>9279525.0</td>
    </tr>
    <tr>
      <th>Angola</th>
      <td>3520.610273</td>
      <td>30.015</td>
      <td>4232095.0</td>
    </tr>
    <tr>
      <th>Argentina</th>
      <td>5911.315053</td>
      <td>62.485</td>
      <td>17876956.0</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">2007</th>
      <th>Vietnam</th>
      <td>2441.576404</td>
      <td>74.249</td>
      <td>85262356.0</td>
    </tr>
    <tr>
      <th>West Bank and Gaza</th>
      <td>3025.349798</td>
      <td>73.422</td>
      <td>4018332.0</td>
    </tr>
    <tr>
      <th>Yemen, Rep.</th>
      <td>2280.769906</td>
      <td>62.698</td>
      <td>22211743.0</td>
    </tr>
    <tr>
      <th>Zambia</th>
      <td>1271.211593</td>
      <td>42.384</td>
      <td>11746035.0</td>
    </tr>
    <tr>
      <th>Zimbabwe</th>
      <td>469.709298</td>
      <td>43.487</td>
      <td>12311143.0</td>
    </tr>
  </tbody>
</table>
<p>1704 rows √ó 3 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># gap_stack[&#39;pop&#39;]</span>
<span class="c1"># gap_stack[gap_stack[&#39;year&#39;] == 2007]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gap_unstack</span> <span class="o">=</span> <span class="n">gap_stack</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)</span>
<span class="n">gap_unstack</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th>measure</th>
      <th colspan="10" halign="left">gdpPercap</th>
      <th>...</th>
      <th colspan="10" halign="left">pop</th>
    </tr>
    <tr>
      <th>year</th>
      <th>1952</th>
      <th>1957</th>
      <th>1962</th>
      <th>1967</th>
      <th>1972</th>
      <th>1977</th>
      <th>1982</th>
      <th>1987</th>
      <th>1992</th>
      <th>1997</th>
      <th>...</th>
      <th>1962</th>
      <th>1967</th>
      <th>1972</th>
      <th>1977</th>
      <th>1982</th>
      <th>1987</th>
      <th>1992</th>
      <th>1997</th>
      <th>2002</th>
      <th>2007</th>
    </tr>
    <tr>
      <th>country</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Afghanistan</th>
      <td>779.445314</td>
      <td>820.853030</td>
      <td>853.100710</td>
      <td>836.197138</td>
      <td>739.981106</td>
      <td>786.113360</td>
      <td>978.011439</td>
      <td>852.395945</td>
      <td>649.341395</td>
      <td>635.341351</td>
      <td>...</td>
      <td>10267083.0</td>
      <td>11537966.0</td>
      <td>13079460.0</td>
      <td>14880372.0</td>
      <td>12881816.0</td>
      <td>13867957.0</td>
      <td>16317921.0</td>
      <td>22227415.0</td>
      <td>25268405.0</td>
      <td>31889923.0</td>
    </tr>
    <tr>
      <th>Albania</th>
      <td>1601.056136</td>
      <td>1942.284244</td>
      <td>2312.888958</td>
      <td>2760.196931</td>
      <td>3313.422188</td>
      <td>3533.003910</td>
      <td>3630.880722</td>
      <td>3738.932735</td>
      <td>2497.437901</td>
      <td>3193.054604</td>
      <td>...</td>
      <td>1728137.0</td>
      <td>1984060.0</td>
      <td>2263554.0</td>
      <td>2509048.0</td>
      <td>2780097.0</td>
      <td>3075321.0</td>
      <td>3326498.0</td>
      <td>3428038.0</td>
      <td>3508512.0</td>
      <td>3600523.0</td>
    </tr>
    <tr>
      <th>Algeria</th>
      <td>2449.008185</td>
      <td>3013.976023</td>
      <td>2550.816880</td>
      <td>3246.991771</td>
      <td>4182.663766</td>
      <td>4910.416756</td>
      <td>5745.160213</td>
      <td>5681.358539</td>
      <td>5023.216647</td>
      <td>4797.295051</td>
      <td>...</td>
      <td>11000948.0</td>
      <td>12760499.0</td>
      <td>14760787.0</td>
      <td>17152804.0</td>
      <td>20033753.0</td>
      <td>23254956.0</td>
      <td>26298373.0</td>
      <td>29072015.0</td>
      <td>31287142.0</td>
      <td>33333216.0</td>
    </tr>
    <tr>
      <th>Angola</th>
      <td>3520.610273</td>
      <td>3827.940465</td>
      <td>4269.276742</td>
      <td>5522.776375</td>
      <td>5473.288005</td>
      <td>3008.647355</td>
      <td>2756.953672</td>
      <td>2430.208311</td>
      <td>2627.845685</td>
      <td>2277.140884</td>
      <td>...</td>
      <td>4826015.0</td>
      <td>5247469.0</td>
      <td>5894858.0</td>
      <td>6162675.0</td>
      <td>7016384.0</td>
      <td>7874230.0</td>
      <td>8735988.0</td>
      <td>9875024.0</td>
      <td>10866106.0</td>
      <td>12420476.0</td>
    </tr>
    <tr>
      <th>Argentina</th>
      <td>5911.315053</td>
      <td>6856.856212</td>
      <td>7133.166023</td>
      <td>8052.953021</td>
      <td>9443.038526</td>
      <td>10079.026740</td>
      <td>8997.897412</td>
      <td>9139.671389</td>
      <td>9308.418710</td>
      <td>10967.281950</td>
      <td>...</td>
      <td>21283783.0</td>
      <td>22934225.0</td>
      <td>24779799.0</td>
      <td>26983828.0</td>
      <td>29341374.0</td>
      <td>31620918.0</td>
      <td>33958947.0</td>
      <td>36203463.0</td>
      <td>38331121.0</td>
      <td>40301927.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>Vietnam</th>
      <td>605.066492</td>
      <td>676.285448</td>
      <td>772.049160</td>
      <td>637.123289</td>
      <td>699.501644</td>
      <td>713.537120</td>
      <td>707.235786</td>
      <td>820.799445</td>
      <td>989.023149</td>
      <td>1385.896769</td>
      <td>...</td>
      <td>33796140.0</td>
      <td>39463910.0</td>
      <td>44655014.0</td>
      <td>50533506.0</td>
      <td>56142181.0</td>
      <td>62826491.0</td>
      <td>69940728.0</td>
      <td>76048996.0</td>
      <td>80908147.0</td>
      <td>85262356.0</td>
    </tr>
    <tr>
      <th>West Bank and Gaza</th>
      <td>1515.592329</td>
      <td>1827.067742</td>
      <td>2198.956312</td>
      <td>2649.715007</td>
      <td>3133.409277</td>
      <td>3682.831494</td>
      <td>4336.032082</td>
      <td>5107.197384</td>
      <td>6017.654756</td>
      <td>7110.667619</td>
      <td>...</td>
      <td>1133134.0</td>
      <td>1142636.0</td>
      <td>1089572.0</td>
      <td>1261091.0</td>
      <td>1425876.0</td>
      <td>1691210.0</td>
      <td>2104779.0</td>
      <td>2826046.0</td>
      <td>3389578.0</td>
      <td>4018332.0</td>
    </tr>
    <tr>
      <th>Yemen, Rep.</th>
      <td>781.717576</td>
      <td>804.830455</td>
      <td>825.623201</td>
      <td>862.442146</td>
      <td>1265.047031</td>
      <td>1829.765177</td>
      <td>1977.557010</td>
      <td>1971.741538</td>
      <td>1879.496673</td>
      <td>2117.484526</td>
      <td>...</td>
      <td>6120081.0</td>
      <td>6740785.0</td>
      <td>7407075.0</td>
      <td>8403990.0</td>
      <td>9657618.0</td>
      <td>11219340.0</td>
      <td>13367997.0</td>
      <td>15826497.0</td>
      <td>18701257.0</td>
      <td>22211743.0</td>
    </tr>
    <tr>
      <th>Zambia</th>
      <td>1147.388831</td>
      <td>1311.956766</td>
      <td>1452.725766</td>
      <td>1777.077318</td>
      <td>1773.498265</td>
      <td>1588.688299</td>
      <td>1408.678565</td>
      <td>1213.315116</td>
      <td>1210.884633</td>
      <td>1071.353818</td>
      <td>...</td>
      <td>3421000.0</td>
      <td>3900000.0</td>
      <td>4506497.0</td>
      <td>5216550.0</td>
      <td>6100407.0</td>
      <td>7272406.0</td>
      <td>8381163.0</td>
      <td>9417789.0</td>
      <td>10595811.0</td>
      <td>11746035.0</td>
    </tr>
    <tr>
      <th>Zimbabwe</th>
      <td>406.884115</td>
      <td>518.764268</td>
      <td>527.272182</td>
      <td>569.795071</td>
      <td>799.362176</td>
      <td>685.587682</td>
      <td>788.855041</td>
      <td>706.157306</td>
      <td>693.420786</td>
      <td>792.449960</td>
      <td>...</td>
      <td>4277736.0</td>
      <td>4995432.0</td>
      <td>5861135.0</td>
      <td>6642107.0</td>
      <td>7636524.0</td>
      <td>9216418.0</td>
      <td>10704340.0</td>
      <td>11404948.0</td>
      <td>11926563.0</td>
      <td>12311143.0</td>
    </tr>
  </tbody>
</table>
<p>142 rows √ó 36 columns</p>
</div></div></div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./lectures/sp22"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="Lecture_10-post.html" title="previous page">Lecture 10 (4/18/22)</a>
    <a class='right-next' id="next-link" href="Lecture_12-post.html" title="next page">Lecture 12 (4/22/2022)</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Erik Brockbank<br/>
        
            &copy; Copyright 2022.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>